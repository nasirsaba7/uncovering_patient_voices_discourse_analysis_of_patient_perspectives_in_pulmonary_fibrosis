import string
from nltk.corpus import stopwords
from nltk.tokenize import word_tokenize
from nltk.stem import WordNetLemmatizer
from gensim.corpora.dictionary import Dictionary
from gensim.models.ldamodel import LdaModel

# Sample text
documents = [
"I was diagnosed with pulmonary fibrosis in 2004 and subsequently got Pulmonary Hypertension as well. A year ago I was prescribed Hydroxychloroquine Sulfate. I am on a drug called nintedanib which I have been on for 4 years. I had to have the dose lowered to reduce side effects. We’re both also on long-term oxygen therapy. I have been on nintedanib for nearly a year now. The drug isn’t expected to improve things as scarring can not be reversed but it is hoped it will stop or slow down progression. I did feel better straight away but I am also taking steroids. Ambulatory oxygen is very important – it helps me keep active. I have recently been given an Inogen one oxygen concentrator. It only gives oxygen when you breathe through the tubes up your nose. Eventually you become dependent on supplementary oxygen for exercise initially and then 24/7 at home just to stay alive. You’re using your own supports whether it is your friends, my telephones been burnt out. It’s just staying in touch with people, that’s kind of what gets you through the day. Yoga, meditation, just going out for a walk, I mean all of those things definitely helped. I started with the garden benches [home improvement project]. It’s just something to keep you going... keep the mind busy on something else… The more you sit around watching the television, the more things will get into your mind. There was company, people with the same disease. I found I was looking forward to going. And I thought it was doing me good. Just having a chat about families and how they are coping, you know that’s the biggest part of it. Getting together and talking to people with the same problem. I couldn’t help thinking that [the patient group meeting] is like [Dr Harold Shipman’s] waiting room, waiting for each one to pop off you know. Because there is always news that somebody is gone and that’s a person you know and I think, my name would be there one day wouldn’t it?’ (Dr Harold Shipman was a UK physician convicted of euthanasia of elderly patients) ... [There was a negative] down turn because you all know that you are going sooner than you’d like to be. It’s sort of monitoring yourself and knowing what your capacity is, and if it is… you’re getting to a… sort of a point where you need to take a break, well take a break you know, that’s all. I guess you learn yourself where those points are. I think by, referring how it affects me to somebody else, may not help them at all, yet it helps me. And that’s why I am saying, I think it is sort of very individual. That means that I have to be aware, more aware… and try and make sure [I] eat properly, exercise, monitor my oxygen requirements. I have to, just get into a routine and acceptance of that, and find the little pockets of positivity within that well. Preparing oneself for… acceptance of the illness, not just acceptance of the illness, but acceptance of the illness that where it is going to take you, as in, in the end, you will die. But um, you can not just put that out of your mind. I know they (family) care and I know they’re gonna be there for me and that’s a big, a big plus, whether it is on an emotional level or a physical level, they would do anything to help me that they could. I can now restore my breathing by remaining as calm as possible and inhaling through my nose. […] I find that drinking water and keeping hydrated, having a small, low sugar sweet in my mouth (liquorice is quite effective) and having small meals, help me to reduce my cough. I do find that my mouth dries out so I must do some mouth breathing, cause I am sort of constantly putting on, you know, lip balm during the day, and at nighttime too. My mother died of lung disease, she had fibrosis, so she had scarring all over her lungs and eventually it covered her lung and I mean, there’s no way you can breathe after a while, and I know this is mind over matter, but do you know those little propeller handheld fans? I mean, this is just mind over matter for sure, but that feeling of air just on her face calmed her down. The decision to start treatment was mine, but it was based on my lung specialist’s advice because I am a layman. I made the decision. I had to make my physician aware of the treatments to get them. I asked the ILD specialist about which drug he would recommend, I was recommended Esbriet. However, I did NOT want to take a treatment that required me taking 9 tablets a day on top of all my heart medication that I already take. My pulmonary fibrosis is due to Rheumatoid Arthritis [RA], the RA is being actively treated but constantly getting pneumonia requiring hospital admissions. A low dose of Baracitinib for my RA. Apparently some rheumatologists do not like prescribing baricitinib to people with lung conditions but I have been taking it for approx. 2 years without any detrimental effect on my lungs so far. My respiratory consultant advised me to stop taking methotrexate which I was on when diagnosed. Rheumy have stopped me taking all other DMARDs too, which I think is because of my pulmonary fibrosis. The lack of multidisciplinary team plays a role here. For instance, physiotherapy is not contemplated as part of the process. The multidisciplinary team should not only include lung specialists, radiologists and pathologists, it should also include physiotherapists. For a few months, I have been using ambulatory oxygen. I had struggled with the concept, as I saw it as a sign my condition was progressing. But now I see it as a way of allowing me to continue to do the things I want to do and as an important safeguard. [Being on oxygen] enables you to carry on doing the things that you want to do… at least it enables you to go out and do some exercise… go off to the park, go and see friends… I think the way people think of oxygen needs to change… that it is a positive thing. I didn’t want to go on oxygen because it was accepting or confirming that I was getting worse. When I look back on it, I should have been on supplementary oxygen 6 months or more before. To slow down the scarring of my lungs, I was prescribed pirfenidone. Initially I had a lot of side effects: nausea, vomiting, diarrhoea and a skin rash which meant I had to put on SPF50 sunscreen whenever I went out in the sun. I also felt very fatigued sometimes and would need to take short breaks during the day. But I tolerated all this as it was slowing the rate of progression of the scarring on my lungs. Corticosteroids made me feel like a balloon. Going out is always a challenge because I worry about running out of oxygen. The three most common challenges I have faced are travelling with oxygen, getting the appropriate oxygen for home use, and exercising with oxygen. I was amazed at how useful it was; it told me things I feel my GP should have; things I needed to know. It gave me the confidence to go to the gym, even with my oxygen. I met a friend on the course and we went together and both exercised with our oxygen. At the course I found out breathing techniques that I still use today, years later. It helped me to cope and accept my condition. I did pulmonary rehab and it really helped. But because I have already done it, and there’s such a waiting list, I haven’t gone back. The doctor suggested I go again recently, and I said to the doctor I do not really feel I can do it. Or have the energy. And then my husband would have to drive me, and it is just sheer distance. What really helped me was going to a pulmonary rehab program. That was a way of being able to start getting back into exercising, and activity, and wellness exercises, and connecting with other people who have lung issues. The fitter your body is, the better you feel both physically and mentally. If you feel better mentally then your whole well-being is more positive and you won’t dwell on the negative sides of the disease. Palliative care can be very useful… you can get medication… assistance, help with nutritional changes, and also participate in relaxation techniques, and get advice on social, emotional and spiritual… Psychological support is very, very important. I often forget to take the one pill I have to take weekly. I prefer to experience diarrhea than a headache as my line of work requires lots of concentration. I tend to gain weight — specifically, corticosteroids made me feel like a balloon. I believe that at the end of the day… any side effects worsen quality of life. If they are all severe, diarrhea is the hardest… every moment of the day going to the toilet can be embarrassing and hits that physical and pride level. The most common thing that a lot of people can not manage is the diarrhea, because you’re literally at home and you can not go anywhere. The sun sensitivity is especially inconvenient as my wife comes from the Caribbean and still wants to travel there and then it would be severe to travel there with such a risk of side effects. I am already on a cocktail of pills and taking nine more a day is too much to ask. However, in June 2017, test results indicated that the medication wasn’t slowing the scarring as much as was hoped. So, I was switched to the only other available and relatively new drug, nintedanib. I was a bit nauseous initially, but I have found a good regime and manage my diet. I was prescribed Esbriet at first but experienced intolerable side effects so the drug was exchanged for OFEV. Is it working? Well, my spirometry test shows little minimal change in the last 6 months. Some people like me do not can not seem to absorb or respond to the Zentevia brand and only do well with the Bristol Brand/Quinoric Brand… Mine was switched in July and I landed up in hospital for 6 weeks. I never dreamt that it could be due to a medication brand switch but it was. There are only 2 approved medications to help slow the condition and I have been on both – the first, Pirfenidone, was not as effective as hoped and so I was switched to Nintedanib. Stephen preferred to have diarrhea and only 2 pills a day instead of vomiting and 9 pills. Oh, over the phone is perfect for me because I do not want to be going in there at all… the hospital is the worst place in the world to be in these days. There was great support in the knowledge that if I was unwell I could ring… That message was re-enforced many times, that if I needed a bit of help, someone to talk to. You really do miss those (faceto-face) meetings… when you come away from it, it is absolutely brilliant, it is just the confidence. I’d be praying night and day that there would not be any changes in my condition… I’d be often worried… I would not be able to self-diagnose myself. For example, if you go to physio, they tell you how to do things [exercises] and then by the time you get home you’ve forgotten it. Whereas, if you’ve got a video, you can always fall back on it and make sure you are doing it correctly. When you go to the doctors you get like seven minutes, the seven minutes finish and I have forgotten, you know what I mean. If you had something on the internet, you could watch it over and over an explain it, you know what I mean, so you can understand it. I have often wondered to what extent the diagnosis is exactly correct. When I go online and read about my symptoms, I often find that the same symptoms apply to several diseases under the same umbrella. I am diagnosed with IPF… some of the treatments seem to be a little bit different. It would be probably quite helpful if there were a genetic test that would say, ‘yeah, this is what you have, not that. And so your treatment should be (this). It would be a real advantage if there was genetic testing developed that might catch something like pulmonary fibrosis right at the very beginning and start treatment right away instead of having it develop and cause lots of scarring before it is diagnosed. I think it would depend on how invasive it is and how accurate it is. I wouldn’t want it to leave me with more questions that there are no answers for. I have siblings, one issue I think is whether … somebody would actually want to know… Some people would want to live their life accordingly. Others, if they think they’re going to get this terrible disease, they’ll be devastated, and it would really negatively affect their quality of life. The sun sensitivity is especially inconvenient as my wife comes from the Caribbean and still wants to travel there and then it would be severe to travel there with such a risk of side effects. However, in June 2017, test results indicated that the medication wasn’t slowing the scarring as much as was hoped. So I was switched to the only other available and relatively new drug, nintedanib. I was a bit nauseous initially, but I have found a good regime and manage my diet. I was prescribed Esbriet at first but experienced intolerable side effects so the drug was exchanged for OFEV. Is it working? Well, my spirometry test shows little minimal change in the last 6 months. Some people like me do not can not [sic] seem to absorb or respond to the Zentevia brand and only do well with the Bristol Brand/Quinoric Brand … Mine [medication] was switched in July and I landed up in hospital for 6 weeks. I never dreamt that it could be due to a medication brand switch but it was. There are only 2 approved medications to help slow the condition and I have been on both – the first, Pirfenidone, was not as effective as hoped and so I was switched to Nintedanib. Stephen [the patient] preferred to have diarrhoea and only 2 pills a day instead of vomiting and 9 pills."
"As IPF was destroying my dad’s life, he struggled with the disappointment that no cure existed, and he looked for a way to support research that could lead to a cure. I just wish it would stop. The feeling that it is never going to improve is sometimes overwhelming. I used to play a lot of golf, swimming, cricket, you name it. I have had no problem, but now I am a television viewer. I have sometimes found lifting whatever across the garden these days is difficult, but before it was easy. I try to keep everything in precise order, so things at the same place all the time. It’s sort of reorganizing your life, try and do everything in one place before you move to another. There are occasions when I can not participate in events because I am too fatigued and I have learned that it is important to pay attention to my body when it is telling me to rest ... I am determined not to let this disease steal my life… … The pain and distressing fatigue made it difficult to exercise, as well, which led to decreased function and more weight gain. I felt trapped in a distressing cycle of illness ... The damage to my lungs from the sarcoidosis has left me with many limitations but I try not to allow these limitations to stop me from living my best life. I work full- time, I travel, I exercise and interact with my friends and family. I am on oxygen all the time, and can only walk a short distance. Because my left lung collapsed due to so much scar tissue, I have partially lost my voice. I limit my physical activities, take measures to keep my hands and feet warm at all times, avoid unnecessary physical contact with people, and avoid eating out. I also try to limit my travel. When I was first diagnosed [with IPF], we made significant lifestyle changes, we downsized our house in preparation and immediately booked all the holidays we could. I now only work part time, which enables me to work around the many hospital appointments. Allison accompanies me on most appointments for moral support and to listen to the details. Under occupational health advice, Charlie’s employer has altered his role so he is office based now and has reduced working hours. I find it very frustrating that I cannot do the amount of manual tasks I used to do and quite often have to leave jobs unfinished for another time. Jobs I would previously do without thinking now have to be planned and timed. Some tasks I just can not do at all anymore which goes against a lifetime of independence. Daily routines like taking a shower, brushing my teeth, or getting dressed are a full time job. As the disease progressed, it became more exhausting. I couldn’t do anything without oxygen. Everything I try to do, which would usually take a day to do, takes me several days instead. I started to notice the effects of the disease and how difficult very simple tasks such as brushing my teeth, taking a shower, putting on clothes, chronic coughing with clear mucus, walking, and climbing stairs or inclines had become. I get breathless doing everyday things like making a cup of tea. It can be quite isolating, but you’ve got to keep going and learn how to adapt to your new norm. Sheetal became breathless when on a long walk or climbing stairs, but she was able to continue working, do the shopping, daily chores and look after Naisha. She wanted to live and be there for Naisha and was able to live a fairly normal life with her symptoms. She was a very strong and courageous person, in fact, the bravest woman I have known. Nothing phased her. But it must have been incredibly difficult for her living in the knowledge that she had limited time– particularly as a mother who wanted to be there to see her daughter grow up. You effectively become disabled in your own house. You need care. You need to have somebody to help you with simple tasks like washing and dressing. My breathing became laboured and simply walking exhausted me — stairs, hills and steep grades were killers. Basic chores involving any form of exertion not only slowed my ability to do things but my desire to do them. I am on oxygen 24/7 but I still struggle with day-to-day activities. Initially, you notice it because you find, you know, walking up hills difficult… then over time even walking up the stairs ... slowly it becomes difficult even to walk on the flat. My activities are severely limited now. Going and taking in my recycling bin requires supplementary oxygen. I can not get out to get the paper every day, so I read the paper every morning, virtually. I took time off from work and worked from home on many occasions. I began to feel isolated and ostracized because of the cough. I was embarrassed by the shortness of breath. I was irritable and suffered from insomnia because of the Prednisone that I was on to control my symptoms, and I was depressed about the weight it caused me to gain. Well, if you can not breathe, you can not do anything. And at this point of the journey, that’s about where I am. I can do no housework, I can not even wash my hair. I have to plan everything that I am going to do that’s going to take energy. I had scarring after severe ARDS – it is nickname is concrete lung – the lung becomes so rigid. The medical staff presumed I would lose a great deal of lung capacity. After some brilliant hospital physiotherapy, a year after ICU, my lungs were fairly normal. Unfortunately a pleural effusion of my left lung through having my leukaemia colonise this area, has left me slightly breathless but that was 2yrs later. I am on hospice care now and have found it to be so helpful and encouraging. I am 77, but mostly enjoy life. We adapted to a slower pace of life. Changes were made to our home to make it easier for us both to move around. We got used to a different social life, as I was unable to leave Peter for more than 2 hours at a time. I try not to do things that trigger my cough, which is everything. I am embarrassed with other people’s reactions as they do not understand my condition. [In the context of the COVID-19 pandemic] all that year, I had been pulling away from social interaction… So when March 2020 came along it was like more of the same. … I am trying to fill my time and concentrate on something else worthwhile, the rugby club and the APF charity fit the bill! We’ve also become involved with the APF support group which is great for connecting with and helping others. Because who wants to go out, first thing they think is that I am contagious, and I am coughing all over the place [… ] the first thing people think is why can not she do something about that cough? ... But they do not understand what the problem is, why I can not stop coughing, and it does, you know, I am not going to say I get embarrassed by it, but I do not want anybody to feel [un]comfortable [… ] You know, like recently there was something, my granddaughter received an award, and I couldn’t go. So I just made the choice not to go. But it has impacted my life. I man, I am pretty much home bound. Sue became ill in her early fifties with pulmonary fibrosis. Very quickly life changed for us. We’ve been together since we were teenagers. We were devastated when we received the diagnosis of IPF. I am always reminding myself that Sue used to be able to do everything and now she can not I have to be an extension of her. She still has the same strong opinions, emotions and aspirations. I have learnt to be more patient, tolerant and understanding. Caring simply means you just help them achieve whatever it is they want to do. Being a carer for your partner pulls on the heart strings and tests all the bonds you have relied on throughout your life together. I feel empowered by understanding the disease and treatments. For me and my wife the two most difficult parts of living with scleroderma are 1) the sense of uncertainty and 2) the coordination of care among the many doctors and facilities involved. The sense of uncertainty makes us fearful of the real and imaginary symptoms that we see in me. I got told off by my daughter for cutting the grass. But I got to do it. I got to do it when I get the chance. My daughter knows, my husband knows. He has been very protective in a loving way. My son, haven’t told him. My son had a shock when he saw me with the oxygen. Eventually she is talking about us moving downstairs and staying downstairs once it gets to a certain point—well I do not want that. I’d rather take 10 minutes to go upstairs to go to bed than staying downstairs all the time. What consumes my husband controls my life as well. It soon became about logistics and practicalities and how our home would need to be adapted with a bedroom downstairs and wider door frames and ramps for wheel chair access. At the time, we didn’t feel the full force of what this meant. It was scary to think that my dad had only possibly 5 years to live, but because he hadn’t changed much (apart from a consistent cough), the terminal diagnosis hadn’t quite hit home ... His use of oxygen tanks was a big adjustment at first, and at times was difficult to see. But we knew he needed it to continue being as active as possible. Pulmonary fibrosis has hit my family hard, but the magnitude and impact on families grows exponentially when you multiply that by as many as 500,000 deaths every decade in the US alone. I have had some truly frightening experiences where coughing has caused my throat to close and, for a few seconds, I can not inhale or exhale. This lasts only a few seconds but it is terrifying for my family. It affects your whole family ... our children, our extended friends, everybody’s lives were tinged by the illness that I was going through. I have tried to talk about this (end of life care) with my wife, but she interrupted me suddenly; she does not even want to hear me talk. In Spain it is necessary to improve early diagnosis of IPF. It is also necessary to create specific Multidisciplinary Centers that would allow an adequate follow-up and treatment to those suffering from the disease. As there is no national transplant waiting list, it is not guaranteed that the person who needs the transplant most will get an available organ first. One of his biggest fears is that he will miss the ‘window of opportunity’ to go on the waiting list. If his health declines too much, he might no longer be suitable: he needs to be sick enough to need a transplant, but not too sick to prevent the transplant going ahead. Most oxygen providers will provide a home concentrator and either tanks or a portable oxygen concentrator (POC). Initially I ended up purchasing a POC out of pocket because it was difficult to get through insurance. Tanks are very heavy and, depending on your flow rate, you may have to carry more than one tank with you. Last fall I was prescribed a POC with a low continuous flow capability and it took over two months, and several follow-up calls by me… oxygen deliveries can be unreliable and sometimes require that you be home for a full day. I wanna know how I am doing you know, I want to be able to see this is what it was last time I did the test and this is what it is now. I have got every reading I have ever done for the last 3 or 4 years. So, when my boy graphed it on the computer so we can see exactly where I am at, how I am going, you know whether my gas transfer is going up or down, do that type of thing. And within say right, maybe I gotta do a bit more exercise or whatever else, it is a terrific gauge. I sort of keep my phone, does the counting actually, number of steps and kilometres walked so, that’s a rough guide to how much I have done. Sometimes the caregiver really knows … living with someone, I think you have a better perspective. And I think it’d be valuable for you to get the caregiver’s opinion … because they’re with them all the time."
]

# Preprocess the text
docs = [doc.lower() for doc in documents]
docs = [''.join(c for c in doc if c not in string.punctuation) for doc in docs]
docs = [word_tokenize(doc) for doc in docs]

stop_words = set(stopwords.words('english'))
docs = [[word for word in doc if word not in stop_words] for doc in docs]

lemmatizer = WordNetLemmatizer()
docs = [[lemmatizer.lemmatize(word) for word in doc] for doc in docs]

# Create a dictionary and corpus
dictionary = Dictionary(docs)
corpus = [dictionary.doc2bow(doc) for doc in docs]

# Perform LDA
lda_model = LdaModel(corpus, num_topics=5, id2word=dictionary, passes=15)

# Display topics
topics = lda_model.print_topics(num_words=5)
for topic in topics:
    print(topic)
